<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <title>html</title>
    <style>
        body {
            max-width: 80%;
            margin: 0 auto;
        }

        .container {
            max-width: 50%;
            margin: 0 auto;
        }

        .sect {
            outline: 1px solid red;
            background: gray;
        }

        .director {
            position: fixed;
            top: 30%;
            right: 20%;
        }

        .director ul li {
            list-style: none;
            width: 50px;
            height: 50px;
            background: gray;
            text-align: center;
            padding-top: 25px;
            border: 1px solid yellowgreen;
            cursor: pointer;
        }

        .focus {
            background: red !important;
            color: white;
        }

        footer {
            height: 500px;
            background: yellowgreen;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="sect sect1">
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
        </div>
        <div class="sect sect2">
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
        </div>
        <div class="sect sect3">
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
        </div>
        <div class="sect sect4">
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
        </div>
        <div class="sect sect5">
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus, minima explicabo illum, accusamus tenetur
                itaque consequuntur officia ex facere eum exercitationem asperiores consequatur odit dolorem magnam commodi
                enim molestiae eos.</p>
        </div>
    </div>
    <div class="director">
        <ul>
            <li data-order='0'>1f</li>
            <li data-order='1'>2f</li>
            <li data-order='2'>3f</li>
            <li data-order='3'>4f</li>
            <li data-order='4'>5f</li>
        </ul>
    </div>
    <footer>
        i'm footer.
    </footer>
    <script>
        (function () {
            function getEleByClass(className) {
                return document.getElementsByClassName(className)[0];
            }
            let container = getEleByClass('container');
            let sect1 = getEleByClass('sect1');
            let sect2 = getEleByClass('sect2');
            let sect3 = getEleByClass('sect3');
            let sect4 = getEleByClass('sect4');
            let sect5 = getEleByClass('sect5');
            let lis = Array.from(document.getElementsByTagName('li'));
            let ul = document.getElementsByTagName('ul')[0];
            lis[0].classList.add('focus');
            let sectArray = Array.from(document.getElementsByClassName('sect'));
            let sectHeightArray = sectArray.map((item) => {
                return item.offsetTop;
            })

            function addFocusClass(cur) {
                lis.forEach((item) => {
                    item.classList.remove('focus');
                })
                lis[cur].classList.add('focus');
            }
            //页面滚动
            window.addEventListener('scroll', handleScroll);

            function handleScroll(event) {
                let current = 0;
                let deltaY = window.scrollY + 50;
                sectHeightArray.forEach((item, index) => {
                    if (deltaY > item && deltaY < sectHeightArray[index + 1]) {
                        current = index;
                    } else if ((index == sectHeightArray.length - 3) && deltaY > item) {
                        current = sectHeightArray.length - 1;
                    }
                })
                addFocusClass(current);
            }
            //点击标签
            ul.addEventListener('click', handleClick);

            function handleClick(event) {
                let ev = event || window.event;
                lis.forEach((item) => {
                    item.classList.remove('focus');
                })
                ev.target.classList.add('focus');
                let current = Number(ev.target.dataset['order']);
                let currentOffsetTop = sectHeightArray[current];
                window.scrollTo(0, currentOffsetTop);
            }
        })();
    </script>
</body>

</html>